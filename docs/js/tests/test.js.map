{"version":3,"file":"test.js","sourceRoot":"","sources":["../../ts/tests/test.ts"],"names":[],"mappings":"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","sourcesContent":["import { decodeFunctionResult, encodeFunctionData, labelhash, namehash, parseEther } from 'viem'\nimport { extractENSFuses, getOpenRenewalManagerAddress, getPetalLockUseTransaction } from '../utils/ensUtils.js'\nimport { petalLockContractArtifact } from '../VendoredPetalLock.js'\nimport { BlockCall, EthSimulateV1Result } from './ethSimulate-types.js'\nimport { jsonRpcRequest } from './ethSimulate.js'\nimport { ENS_ETH_REGISTRAR_CONTROLLER, ENS_PUBLIC_RESOLVER, ENS_NAME_WRAPPER, FINAL_CHILD_FUSES, MID_PARENT_FUSES, SINGLE_DOMAIN_FUSES, TOP_PARENT_FUSES } from '../utils/constants.js'\nimport { ENS_WRAPPER_ABI } from '../abi/ens_wrapper_abi.js'\nimport { ENS_REGISTRAR_CONTROLLER_ABI } from '../abi/ens_registrar_controller_abi.js'\nimport { dataStringWith0xStart, splitDomainToSubDomainAndParent } from '../utils/utilities.js'\nimport { ENS_PUBLIC_RESOLVER_ABI } from '../abi/ens_public_resolver_abi.js'\nimport { decodeContentHash } from '../utils/contenthash.js'\nimport { addressString, allSuccess, bytesToUnsigned, removeEthSuffix, stringToUint8Array } from './test-utils.js'\nimport { OPEN_RENEWAL_MANAGER_ABI } from '../abi/open_renewal_manager_abi.js'\nimport { PETAL_LOCK_ABI } from '../abi/petal_lock_abi.js'\n\nconst rpc = 'https://geth.dark.florist' as const\n\nconst petalLockAddress = 0x93741n\n\nconst subdomainRouteNames2 = ['darkflorist.eth', 'immutable.darkflorist.eth'] as const\nconst subdomainRouteNames3 = ['darkflorist.eth', 'midname.darkflorist.eth', 'immutable.midname.darkflorist.eth'] as const\nconst subdomainRouteNames3_another = ['darkflorist.eth', 'midname.darkflorist.eth', 'immutable2.midname.darkflorist.eth'] as const\nconst ownAddress = 0x6D6054F7745a3Aaf4d1E4ac5830E4ABDc328Ab6Bn\nconst whale = 0x000054F774000Aaf4d100000000E4ABDc328Ab6Bn\nconst testContentHash = 'ipfs://bafybeie7zcqhap5vopmfmacoy6xa5jxguxepeseca4iilnchvydqkivnue'\n\nconst makeImmutableDomain = (routenames: readonly string[], ownedTokens: readonly bigint[]) => { // 'darkflorist.eth', 'immutable.darkflorist.eth'\n\tconst tx = getPetalLockUseTransaction(\n\t\taddressString(petalLockAddress),\n\t\taddressString(ownAddress),\n\t\t[...routenames],\n\t\t[...ownedTokens],\n\t\ttestContentHash,\n\t\taddressString(ownAddress)\n\t)\n\treturn {\n\t\tfrom: ownAddress,\n\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\tinput: stringToUint8Array(encodeFunctionData(tx))\n\t}\n}\n\nconst ethSimulateTransactions = async (rpc: string, transactions: readonly BlockCall[]): Promise<EthSimulateV1Result> => {\n\treturn EthSimulateV1Result.parse(await jsonRpcRequest(rpc, {\n\t\tmethod: 'eth_simulateV1',\n\t\tparams: [\n\t\t\t{\n\t\t\t\tblockStateCalls: [{\n\t\t\t\t\tcalls: transactions,\n\t\t\t\t\tstateOverrides: {\n\t\t\t\t\t\t[getOpenRenewalManagerAddress()]: {\n\t\t\t\t\t\t\tcode: stringToUint8Array(`0x${ petalLockContractArtifact.contracts['OpenRenewalManager.sol'].OpenRenewalManager.evm.deployedBytecode.object }`)\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[addressString(petalLockAddress)]: {\n\t\t\t\t\t\t\tcode: stringToUint8Array(`0x${ petalLockContractArtifact.contracts['PetalLock.sol'].PetalLock.evm.deployedBytecode.object }`)\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[addressString(ownAddress)]: {\n\t\t\t\t\t\t\tbalance: parseEther('200000')\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[addressString(whale)]: {\n\t\t\t\t\t\t\tbalance: parseEther('200000')\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}],\n\t\t\t\ttraceTransfers: true,\n\t\t\t\tvalidation: false,\n\t\t\t},\n\t\t\t'latest'\n\t\t]\n\t} as const))\n}\n\nconst printResults = (result: EthSimulateV1Result) => {\n\tconsole.log(JSON.stringify(EthSimulateV1Result.serialize(result)))\n}\n\nconst checkSuccess = (result: EthSimulateV1Result) => {\n\tif (allSuccess(result)) return\n\tprintResults(result)\n\tthrow new Error('transaction failed')\n}\n\nconst runTests = async () => {\n\tconsole.log(`Reneval manager: ${ getOpenRenewalManagerAddress() }`)\n\tconst testOpenRenewalManagerAddressIsConstant = async () => {\n\t\tconst openRenewalManagerAddress = 0x55B75C29834DFd71ef30E2C828a938394564f0C0n\n\t\tconst calculatedAddress = BigInt(getOpenRenewalManagerAddress())\n\t\tif (calculatedAddress !== openRenewalManagerAddress) throw new Error(`The Address of Open Renewal Manager has changed to ${ addressString(calculatedAddress) }.`)\n\t}\n\tconst testMakeImmutable = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))] as const\n\t\tconst result = await ethSimulateTransactions(rpc, [makeImmutableDomain(subdomainRouteNames2, ownedTokens)])\n\t\tcheckSuccess(result)\n\t}\n\tconst testWeHaveTheOrignalToken = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))] as const\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames2, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [addressString(ownAddress), ownedTokens[0]]\n\t\t\t\t}))\n\t\t\t}\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[1]?.returnData === undefined) throw new Error('no return data')\n\t\tif (bytesToUnsigned(result[0]?.calls[1]?.returnData) !== 1n)  throw new Error('we lost the token')\n\t}\n\tconst testThatFusesAreCorrect = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames2, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_ETH_REGISTRAR_CONTROLLER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_REGISTRAR_CONTROLLER_ABI,\n\t\t\t\t\tfunctionName: 'renew',\n\t\t\t\t\targs: [removeEthSuffix(subdomainRouteNames2[0]), 10n],\n\t\t\t\t})),\n\t\t\t\tvalue: parseEther('1')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames2[1]))]\n\t\t\t\t})),\n\t\t\t}\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[2]?.returnData === undefined || result[0]?.calls[3]?.returnData === undefined) throw new Error('no results for calls')\n\n\t\tconst parentData = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[2]?.returnData) })\n\t\tconst parentFuses = new Set(extractENSFuses(BigInt(parentData[1])))\n\t\tif (!new Set(TOP_PARENT_FUSES).isSubsetOf(new Set(parentFuses))) throw new Error(`not correct parent fuses: ${ Array.from(parentFuses).join(',') }, Expected: ${ TOP_PARENT_FUSES.join(',') }`)\n\n\t\tconst childData = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[3]?.returnData) })\n\t\tconst childFuses = new Set(extractENSFuses(BigInt(childData[1])))\n\t\tif (!new Set(FINAL_CHILD_FUSES).isSubsetOf(childFuses)) throw new Error('not correct child fuses')\n\t}\n\tconst testNoData = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [{\n\t\t\tfrom: ownAddress,\n\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\tfunctionName: 'safeBatchTransferFrom',\n\t\t\t\targs: [addressString(ownAddress), addressString(petalLockAddress), ownedTokens, ownedTokens.map(() => 1n), '0x']\n\t\t\t})),\n\t\t}])\n\t\tif (allSuccess(result)) throw new Error('transaction should have failed')\n\t}\n\tconst testNoNonBatchTransfer = async () => {\n\t\tconst result = await ethSimulateTransactions(rpc, [{\n\t\t\tfrom: ownAddress,\n\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\tfunctionName: 'safeTransferFrom',\n\t\t\t\targs: [addressString(ownAddress), addressString(petalLockAddress), BigInt(namehash(subdomainRouteNames2[0])), 1n, '0x']\n\t\t\t})),\n\t\t}])\n\t\tif (allSuccess(result)) throw new Error('transaction should have failed')\n\t}\n\tconst testThatFusesAreCorrect3Part = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames3, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[1]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[2]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [addressString(ownAddress), BigInt(namehash(subdomainRouteNames3[0]))]\n\t\t\t\t}))\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [addressString(ownAddress), BigInt(namehash(subdomainRouteNames3[1]))]\n\t\t\t\t}))\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [addressString(ownAddress), BigInt(namehash(subdomainRouteNames3[2]))]\n\t\t\t\t}))\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [getOpenRenewalManagerAddress(), BigInt(namehash(subdomainRouteNames3[2]))]\n\t\t\t\t}))\n\t\t\t}\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[1]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[2]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[3]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[4]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[5]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[6]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[7]?.returnData === undefined\n\t\t) throw new Error('no call results')\n\t\t// parent 1\n\t\tconst parentData1 = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[1]?.returnData) })\n\t\tconst parentFuses1 = new Set(extractENSFuses(BigInt(parentData1[1])))\n\t\tif (!new Set(TOP_PARENT_FUSES).isSubsetOf(parentFuses1)) throw new Error('not correct parent1 fuses')\n\n\t\t// parent 2\n\t\tconst parentData2 = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[2]?.returnData) })\n\t\tconst parentFuses2 = new Set(extractENSFuses(BigInt(parentData2[1])))\n\t\tif (!new Set(MID_PARENT_FUSES).isSubsetOf(parentFuses2)) throw new Error('not correct parent2 fuses')\n\n\t\t// child\n\t\tconst childData = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[3]?.returnData) })\n\t\tconst childFuses = new Set(extractENSFuses(BigInt(childData[1])))\n\t\tif (!new Set(FINAL_CHILD_FUSES).isSubsetOf(childFuses)) throw new Error('not correct child fuses')\n\n\t\t// parent 1 ownership.  We should own this\n\t\tif (bytesToUnsigned(result[0]?.calls[4]?.returnData) !== 1n) throw new Error('we lost the token 1')\n\n\t\t// parent 2 ownership. We should own this\n\t\tif (bytesToUnsigned(result[0]?.calls[5]?.returnData) !== 1n) throw new Error('we lost the token 2')\n\n\t\t// child ownership\n\t\tif (bytesToUnsigned(result[0]?.calls[6]?.returnData) !== 0n) throw new Error('we didnt lose the child')\n\t\tif (bytesToUnsigned(result[0]?.calls[7]?.returnData) !== 1n) throw new Error('open renewal manager does not have the child')\n\t}\n\tconst testContentHashIsSet = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_PUBLIC_RESOLVER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_PUBLIC_RESOLVER_ABI,\n\t\t\t\t\tfunctionName: 'contenthash',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[1])],\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_PUBLIC_RESOLVER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_PUBLIC_RESOLVER_ABI,\n\t\t\t\t\tfunctionName: 'addr',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[1])],\n\t\t\t\t})),\n\t\t\t},\n\t\t\tmakeImmutableDomain(subdomainRouteNames2, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_PUBLIC_RESOLVER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_PUBLIC_RESOLVER_ABI,\n\t\t\t\t\tfunctionName: 'contenthash',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[1])],\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_PUBLIC_RESOLVER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_PUBLIC_RESOLVER_ABI,\n\t\t\t\t\tfunctionName: 'addr',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[1])],\n\t\t\t\t})),\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[0]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[1]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[2]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[3]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[4]?.returnData === undefined\n\t\t) throw new Error('no results')\n\t\tconst priorContentHash = decodeFunctionResult({ abi: ENS_PUBLIC_RESOLVER_ABI, functionName: 'contenthash', data: dataStringWith0xStart(result[0].calls[0].returnData) })\n\t\tconst afterContentHash = decodeFunctionResult({ abi: ENS_PUBLIC_RESOLVER_ABI, functionName: 'contenthash', data: dataStringWith0xStart(result[0].calls[3].returnData) })\n\n\t\tif (priorContentHash === afterContentHash) throw new Error('content has was not set')\n\t\tif (decodeContentHash(afterContentHash) !== testContentHash) throw new Error('wrong content hash')\n\n\t\tconst priorAddr = dataStringWith0xStart(result[0].calls[1].returnData)\n\t\tconst afterAddr = dataStringWith0xStart(result[0].calls[4].returnData)\n\t\tif (BigInt(priorAddr) === BigInt(afterAddr)) throw new Error('addr was not set')\n\t\tif (BigInt(afterAddr) !== ownAddress) throw new Error('addr is not correct')\n\t}\n\tconst testThatFusesAreCorrect3PartAgain = async () => {\n\t\tconst ownedTokens3 = [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\tconst ownedTokens3_another = [BigInt(namehash(subdomainRouteNames3[0])), BigInt(namehash(subdomainRouteNames3[1]))]\n\t\t//check that we can create more subdomains after creating noe\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames3, ownedTokens3),\n\t\t\tmakeImmutableDomain(subdomainRouteNames3_another, ownedTokens3_another),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3_another[2]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [getOpenRenewalManagerAddress(), BigInt(namehash(subdomainRouteNames3_another[2]))]\n\t\t\t\t}))\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[2]?.returnData === undefined || result[0]?.calls[3]?.returnData === undefined) throw new Error('no call results')\n\t\t// child\n\t\tconst childData = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[2]?.returnData) })\n\t\tconst childFuses = new Set(extractENSFuses(BigInt(childData[1])))\n\t\tif (!new Set(FINAL_CHILD_FUSES).isSubsetOf(childFuses)) throw new Error('not correct child fuses')\n\t\tif (bytesToUnsigned(result[0]?.calls[3]?.returnData) !== 1n) throw new Error('open renewal manager does not have the child')\n\t}\n\tconst testAnyoneCanRenew = async() => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames2, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_ETH_REGISTRAR_CONTROLLER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_REGISTRAR_CONTROLLER_ABI,\n\t\t\t\t\tfunctionName: 'renew',\n\t\t\t\t\targs: [removeEthSuffix(subdomainRouteNames2[0]), 10n],\n\t\t\t\t})),\n\t\t\t\tvalue: parseEther('1')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(getOpenRenewalManagerAddress()),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: OPEN_RENEWAL_MANAGER_ABI,\n\t\t\t\t\tfunctionName: 'extendExpiry',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[0]), labelhash('immutable'), 2n ** 64n - 1n]\n\t\t\t\t})),\n\t\t\t}\n\t\t])\n\t\tcheckSuccess(result)\n\t}\n\tconst checkApprovals = async() => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames3, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getApproved',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[0]))],\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getApproved',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[1]))],\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getApproved',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[2]))],\n\t\t\t\t})),\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[1]?.returnData === undefined || result[0]?.calls[2]?.returnData === undefined || result[0]?.calls[3]?.returnData === undefined) throw new Error('fff')\n\n\t\tconst renewalManager = getOpenRenewalManagerAddress()\n\t\tif (BigInt(dataStringWith0xStart(result[0]?.calls[1]?.returnData)) !== BigInt(renewalManager)) throw new Error('wrong approval for call 1')\n\t\tif (BigInt(dataStringWith0xStart(result[0]?.calls[2]?.returnData)) !== BigInt(renewalManager)) throw new Error('wrong approval for call 2')\n\t\tif (BigInt(dataStringWith0xStart(result[0]?.calls[3]?.returnData)) !== BigInt(renewalManager)) throw new Error('wrong approval for call 3')\n\t}\n\tconst testAnyoneCanRenew3 = async() => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames3, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_ETH_REGISTRAR_CONTROLLER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_REGISTRAR_CONTROLLER_ABI,\n\t\t\t\t\tfunctionName: 'renew',\n\t\t\t\t\targs: [removeEthSuffix(subdomainRouteNames3[0]), 10n],\n\t\t\t\t})),\n\t\t\t\tvalue: parseEther('1')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(getOpenRenewalManagerAddress()),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: OPEN_RENEWAL_MANAGER_ABI,\n\t\t\t\t\tfunctionName: 'extendExpiry',\n\t\t\t\t\targs: [namehash(subdomainRouteNames3[0]), labelhash('midname'), 2n ** 64n - 1n]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(getOpenRenewalManagerAddress()),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: OPEN_RENEWAL_MANAGER_ABI,\n\t\t\t\t\tfunctionName: 'extendExpiry',\n\t\t\t\t\targs: [namehash(subdomainRouteNames3[1]), labelhash('immutable'), 2n ** 64n - 1n]\n\t\t\t\t})),\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t}\n\tconst testImmutableDomain = async() => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain([subdomainRouteNames2[0]], ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_ETH_REGISTRAR_CONTROLLER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_REGISTRAR_CONTROLLER_ABI,\n\t\t\t\t\tfunctionName: 'renew',\n\t\t\t\t\targs: [removeEthSuffix(subdomainRouteNames2[0]), 10n],\n\t\t\t\t})),\n\t\t\t\tvalue: parseEther('1')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_PUBLIC_RESOLVER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_PUBLIC_RESOLVER_ABI,\n\t\t\t\t\tfunctionName: 'contenthash',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[0])],\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_PUBLIC_RESOLVER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_PUBLIC_RESOLVER_ABI,\n\t\t\t\t\tfunctionName: 'addr',\n\t\t\t\t\targs: [namehash(subdomainRouteNames2[1])],\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: ownAddress,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'balanceOf',\n\t\t\t\t\targs: [getOpenRenewalManagerAddress(), BigInt(namehash(subdomainRouteNames2[0]))]\n\t\t\t\t}))\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[0]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[1]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[2]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[3]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[4]?.returnData === undefined ||\n\t\t\tresult[0]?.calls[5]?.returnData === undefined\n\t\t) throw new Error('no results')\n\t\tconst contentHash = decodeFunctionResult({ abi: ENS_PUBLIC_RESOLVER_ABI, functionName: 'contenthash', data: dataStringWith0xStart(result[0].calls[2].returnData) })\n\n\t\tif (decodeContentHash(contentHash) !== testContentHash) throw new Error('wrong content hash')\n\t\tconst childData = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[4]?.returnData) })\n\t\tconst childFuses = new Set(extractENSFuses(BigInt(childData[1])))\n\t\tif (!new Set(SINGLE_DOMAIN_FUSES).isSubsetOf(childFuses)) throw new Error('not correct child fuses')\n\t\tif (bytesToUnsigned(result[0]?.calls[5]?.returnData) !== 1n) throw new Error('open renewal manager does not have the child')\n\t}\n\tconst testAnyoneCanRenewDomainExistingOne = async() => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain([subdomainRouteNames3[0]], ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[2]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_ETH_REGISTRAR_CONTROLLER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_REGISTRAR_CONTROLLER_ABI,\n\t\t\t\t\tfunctionName: 'renew',\n\t\t\t\t\targs: [removeEthSuffix(subdomainRouteNames3[0]), 10n],\n\t\t\t\t})),\n\t\t\t\tvalue: parseEther('100')\n\t\t\t},\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: ENS_WRAPPER_ABI,\n\t\t\t\t\tfunctionName: 'getData',\n\t\t\t\t\targs: [BigInt(namehash(subdomainRouteNames3[2]))]\n\t\t\t\t})),\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t\tif (result[0]?.calls[1]?.returnData === undefined || result[0]?.calls[3]?.returnData === undefined) throw new Error('no results')\n\t\tconst before = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[1]?.returnData) })\n\t\tconst after = decodeFunctionResult({ abi: ENS_WRAPPER_ABI, functionName: 'getData', data: dataStringWith0xStart(result[0]?.calls[3]?.returnData) })\n\t\tif (before[2] > after[2]) throw new Error('failed to extend')\n\t}\n\tconst testBatchExtend = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames3[0]))]\n\t\tconst result = await ethSimulateTransactions(rpc, [\n\t\t\tmakeImmutableDomain(subdomainRouteNames3, ownedTokens),\n\t\t\t{\n\t\t\t\tfrom: whale,\n\t\t\t\tto: petalLockAddress,\n\t\t\t\tinput: stringToUint8Array(encodeFunctionData({\n\t\t\t\t\tabi: PETAL_LOCK_ABI,\n\t\t\t\t\tfunctionName: 'batchExtend',\n\t\t\t\t\targs: [subdomainRouteNames3.map((subdomain) => {\n\t\t\t\t\t\tconst [label, parent] = splitDomainToSubDomainAndParent(subdomain)\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tparentNode: namehash(parent),\n\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\tdomainExpiry: 31536000n\n\t\t\t\t\t\t}\n\t\t\t\t\t})],\n\t\t\t\t})),\n\t\t\t\tvalue: parseEther('100'),\n\t\t\t},\n\t\t])\n\t\tcheckSuccess(result)\n\t}\n\tconst domainOrderWrong = async () => {\n\t\tconst ownedTokens = [BigInt(namehash(subdomainRouteNames2[0]))]\n\t\tconst tx = getPetalLockUseTransaction(\n\t\t\taddressString(petalLockAddress),\n\t\t\taddressString(ownAddress),\n\t\t\t[subdomainRouteNames2[1], subdomainRouteNames2[0]],\n\t\t\t[...ownedTokens],\n\t\t\ttestContentHash,\n\t\t\taddressString(ownAddress)\n\t\t)\n\t\tconst result = await ethSimulateTransactions(rpc, [{\n\t\t\tfrom: ownAddress,\n\t\t\tto: BigInt(ENS_NAME_WRAPPER),\n\t\t\tinput: stringToUint8Array(encodeFunctionData(tx))\n\t\t}])\n\t\tif (allSuccess(result)) throw new Error('transaction succeeded while it should fail')\n\t}\n\tawait testOpenRenewalManagerAddressIsConstant()\n\tawait testMakeImmutable()\n\tawait testWeHaveTheOrignalToken()\n\tawait testThatFusesAreCorrect()\n\tawait testNoData()\n\tawait testNoNonBatchTransfer()\n\tawait testThatFusesAreCorrect3Part()\n\tawait testContentHashIsSet()\n\tawait checkApprovals()\n\tawait testAnyoneCanRenew()\n\tawait testAnyoneCanRenew3()\n\tawait testImmutableDomain()\n\tawait testThatFusesAreCorrect3PartAgain()\n\tawait testAnyoneCanRenewDomainExistingOne()\n\tawait testBatchExtend()\n\tawait domainOrderWrong()\n}\nrunTests()\n"]}